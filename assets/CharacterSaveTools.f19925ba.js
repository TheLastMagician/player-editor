var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,i=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&n(e,a,t[a]);if(l)for(var a of l(t))r.call(t,a)&&n(e,a,t[a]);return e};import{I as o,J as c,R as d,K as u,L as p,M as h,N as m,O as v,P as f,Q as g,S as b,T as A,U as C,W as y,X as k,Y as x,Z as _,_ as w,$ as S,a0 as j,a1 as D,a2 as V,a3 as L,a4 as I,b as T,a5 as B,a6 as $,a7 as E,a8 as M,a9 as U,aa as P,ab as O,ac as R,ad as F,ae as J,i as N,f as H,af as Q,g as Y,m as X,y as G,ag as z,ah as W,r as K,o as Z,n as q,w as ee,ai as te,aj as ae,ak as le,d as se,a as re,t as ne,s as ie,al as oe,am as ce,an as de,q as ue,F as pe,ao as he,ap as me,aq as ve,ar as fe,p as ge}from"./vendor.5ae40592.js";import{g as be,d as Ae}from"./index.108e6609.js";var Ce=o("v-card-actions"),ye=o("v-card-avatar"),ke=o("v-card-header"),xe=o("v-card-header-text"),_e=o("v-card-img"),we=o("v-card-subtitle"),Se=o("v-card-text"),je=o("v-card-title"),De=c({name:"VCard",directives:{Ripple:d},props:i(i(i(i(i(i(i(i(i(i({appendAvatar:String,appendIcon:String,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:Boolean,prependAvatar:String,prependIcon:String,ripple:Boolean,subtitle:String,text:String,title:String},u()),p()),h()),m()),v()),f()),g()),b()),A()),C({variant:"contained"})),setup(e,{attrs:t,slots:a}){const{themeClasses:l}=y(e),{borderClasses:s}=k(e,"v-card"),{colorClasses:r,colorStyles:n,variantClasses:i}=x(e,"v-card"),{densityClasses:o}=_(e,"v-card"),{dimensionStyles:c}=w(e),{elevationClasses:d}=S(e),{positionClasses:u,positionStyles:p}=j(e,"v-card"),{roundedClasses:h}=D(e,"v-card"),m=V(e,t);return()=>{var t,v,f;const g=m.isLink.value?"a":e.tag,b=!(!a.title&&!e.title),A=!(!a.subtitle&&!e.subtitle),C=b||A,y=!!(a.append||e.appendAvatar||e.appendIcon),k=!!(a.prepend||e.prependAvatar||e.prependIcon),x=!(!a.image&&!e.image),_=C||k||y,w=!(!a.text&&!e.text),S=!e.disabled&&(m.isClickable.value||e.link);return L(T(g,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":S},l.value,s.value,r.value,o.value,d.value,u.value,h.value,i.value],style:[n.value,c.value,p.value],href:m.href.value,onClick:S&&m.navigate},{default:()=>[B(S,"v-card"),x&&T(_e,null,{default:()=>[a.image?null==(t=a.image)?void 0:t.call(a,{src:e.image}):T($,{src:e.image,cover:!0,alt:""},null,8,["src","cover"])]}),null==(v=a.media)?void 0:v.call(a),_&&T(ke,null,{default:()=>[k&&T(ye,null,{default:()=>[a.prepend?a.prepend():T(E,{density:e.density,icon:e.prependIcon,image:e.prependAvatar},null,8,["density","icon","image"])]}),C&&T(xe,null,{default:()=>[b&&T(je,null,{default:()=>[a.title?a.title():e.title]}),T(we,null,{default:()=>[a.subtitle?a.subtitle():e.subtitle]})],_:1}),y&&T(ye,null,{default:()=>[a.append?a.append():T(E,{density:e.density,icon:e.appendIcon,image:e.appendAvatar},null,8,["density","icon","image"])]})],_:1}),w&&T(Se,null,{default:()=>[a.text?a.text():e.text]}),null==(f=a.default)?void 0:f.call(a),a.actions&&T(Ce,null,{default:a.actions})],_:1},8,["class","style","href","onClick"]),[[I("ripple"),S]])}}}),Ve=c({name:"VDivider",props:i({inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean},u()),setup(e,{attrs:t}){const{themeClasses:a}=y(e),l=M((()=>{const t={};return e.length&&(t[e.vertical?"maxHeight":"maxWidth"]=U(e.length)),e.thickness&&(t[e.vertical?"borderRightWidth":"borderTopWidth"]=U(e.thickness)),t}));return()=>T("hr",{class:[{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},a.value],style:l.value,"aria-orientation":t.role&&"separator"!==t.role?void 0:e.vertical?"vertical":"horizontal",role:`${t.role||"separator"}`},null,14,["aria-orientation"])}}),Le=c({name:"VTooltip",inheritAttrs:!1,props:i({id:String,modelValue:Boolean,text:String,anchor:{type:String,default:"end"},origin:{type:String,default:"auto"}},P({transition:!1})),emits:{"update:modelValue":e=>!0},setup(e,{attrs:t,slots:a}){const l=O(e,"modelValue"),s=J(),r=M((()=>e.id||`v-tooltip-${s}`)),n=M((()=>e.anchor.split(" ").length>1?e.anchor:e.anchor+" center")),i=M((()=>"auto"===e.origin||"overlap"===e.origin||e.origin.split(" ").length>1||e.anchor.split(" ").length>1?e.origin:e.origin+" center")),o=M((()=>e.transition?e.transition:l.value?"scale-transition":"fade-transition"));return()=>{var s,c;return T(F,R({modelValue:l.value,"onUpdate:modelValue":e=>l.value=e,class:["v-tooltip"],id:r.value,transition:o.value,absolute:!0,positionStrategy:"connected",scrollStrategy:"reposition",anchor:n.value,origin:i.value,"min-width":0,offset:10,scrim:!1,persistent:!0,"open-on-click":!1,"open-on-hover":!0,role:"tooltip",eager:!0,activatorProps:{"aria-describedby":r.value}},t),{default:()=>[null!=(s=null==(c=a.default)?void 0:c.call(a))?s:e.text],activator:a.activator,_:1},16,["modelValue","onUpdate:modelValue","id","transition","absolute","anchor","origin","persistent","open-on-hover","eager","activatorProps"])}}});const Ie={props:{},data:()=>({hovered:!1,fileLocDialog:!1,helpDialog:!1}),methods:{async loadFile(e){await this.$store.dispatch("setLoading",!0),await new Promise((e=>setTimeout(e,50)));const t=new FileReader;t.readAsArrayBuffer(e),t.onload=t=>{const a=t.target.result;var l={name:e.name,data:null};e.name.endsWith(".xml")?l.data=G.Buffer.from(a).toString("utf-8"):l.data=a,this.$store.dispatch("fileUploaded",l)}},selectHandler(e){var t;this.$store.dispatch("showTree"),(null==(t=e.target)?void 0:t.files[0])&&this.loadFile(e.target.files[0]),e.target.value=null},dropHandler(e){var t;this.hovered=!1,(null==(t=e.dataTransfer)?void 0:t.files[0])&&this.loadFile(e.dataTransfer.files[0])},dropzoneClickHandler(){this.$refs.fileInput.click()},dragEnter(){this.hovered=!0},dragLeave(){this.hovered=!1}},computed:{getBorderColor(){return this.$vuetify.theme.themes.dark.colors.secondary},fileImage:()=>"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAABLUlEQVRo3u2YMQ7CMAxFvxErAwdgZoQjduQswAUYmDkDO2sHygHMUiSo1MZJE5uC31Ypif+LK6Up4DhOEGZeMfORmRseT2URvs4Q3Eai3fkS6Ehkem3sJLoVc63zxm7qAmUllATKSSgKlJFQFsgvYSCQV8JIIJ+EoYBIgiSFPyYQBedI1pESqjdL3dFvYa5VSNq52E5NvgMuYI0LWFNUgJmrIh9okSGSTuI2fPRnQa6Tf9SCnfBREuYCPeHFEqYCgfAiCTMBYfighIlAZPhBCXWBxPC9ErECRe4DfYVT5v78fcAFrHEBa4rciVP/XKTwFx14AFi8HrKcjnLuoQGSDpwVA3c5hQZITsY1gAuApXL4GsCWiG5Dg4IdIKIrgA2AA4BGIXgDYC8J7zgO8ASiT0oNF0KikAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wNy0yM1QyMDowNzoxOSswMDowMPb+N9UAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDctMjNUMjA6MDc6MTkrMDA6MDCHo49pAAAAAElFTkSuQmCC"}};z("data-v-46bfa9d0");const Te={class:"d-flex flex-row align-center justify-center mb-1"},Be=te("div",{class:"h3 mb-1"},"拖拽或者点击图标上传:",-1),$e=se("mdi-file-find-outline"),Ee=se("玩家人物文件路径"),Me=te("span",{class:"text-h5"},"玩家人物文件路径",-1),Ue=se("mdi-close-thick"),Pe=te("div",{class:"text-h6 text-center"},"各系统文件路径:",-1),Oe=te("ul",null,[te("li",null,[se(" Windows: "),te("span",{class:"text-primary"}," C:\\Users\\%username%\\AppData\\Local\\Daedalic Entertainment GmbH\\Barotrauma\\Multiplayer\\XXX_CharacterData.xml ")]),te("li",null,[se(" Linux: "),te("span",{class:"text-primary"}," /home/$USER/.local/share/Daedalic Entertainment GmbH/Barotrauma/Multiplayer/XXX_CharacterData.xml ")]),te("li",null,[se(" MacOS: "),te("span",{class:"text-primary"}," /$USER/Library/Application Support/Daedalic Entertainment GmbH/Barotrauma\\Multiplayer/XXX_CharacterData.xml ")])],-1),Re=te("span",{class:"text-h5"},"What files can i load here?",-1),Fe=se("mdi-close-thick"),Je=te("div",{class:"text-h6 text-center"},[se(" Save editor needs to load "),te("span",{class:"text-primary font-weight-bold"},".save"),se(" file first, then it accepts: ")],-1),Ne=te("ul",null,[te("li",null,[te("span",{class:"text-primary font-weight-bold"},".sub"),se(" - Add a new owned submarine or update file of an existing one ")]),te("li",null,[te("span",{class:"text-primary font-weight-bold"},"gamesession.xml"),se(" - Replace gamesession.xml inside the loaded save ")]),te("li",null,[te("span",{class:"text-primary font-weight-bold"},"(...)_CharacterData.xml"),se(" - Import player characters from multiplayer save as bots ")])],-1),He=["accept"];W(),Ie.render=function(e,t,a,l,s,r){const n=K("v-spacer"),i=K("v-icon"),o=K("v-tooltip"),c=K("v-btn"),d=K("v-card-title"),u=K("v-divider"),p=K("v-card-text"),h=K("v-card"),m=K("v-dialog");return Z(),q(h,{class:"pa-4",elevation:"1"},{default:ee((()=>[te("div",Te,[Be,T(n),T(c,{onClick:t[0]||(t[0]=ae((e=>s.fileLocDialog=!0),["stop"])),size:"x-small",icon:""},{default:ee((()=>[T(i,null,{default:ee((()=>[$e])),_:1}),T(o,{anchor:"bottom",activator:"parent"},{default:ee((()=>[Ee])),_:1})])),_:1}),T(m,{class:"filedropper",modelValue:s.fileLocDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>s.fileLocDialog=e)},{default:ee((()=>[T(h,null,{default:ee((()=>[T(d,null,{default:ee((()=>[Me,T(n),T(c,{color:"red",size:"x-small",icon:"",onClick:t[1]||(t[1]=e=>s.fileLocDialog=!1)},{default:ee((()=>[T(i,null,{default:ee((()=>[Ue])),_:1})])),_:1})])),_:1}),T(u),T(p,{class:"pl-8"},{default:ee((()=>[Pe,Oe])),_:1})])),_:1})])),_:1},8,["modelValue"]),T(m,{class:"filedropper",modelValue:s.helpDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>s.helpDialog=e)},{default:ee((()=>[T(h,null,{default:ee((()=>[T(d,null,{default:ee((()=>[Re,T(n),T(c,{color:"red",size:"x-small",icon:"",onClick:t[3]||(t[3]=e=>s.helpDialog=!1)},{default:ee((()=>[T(i,null,{default:ee((()=>[Fe])),_:1})])),_:1})])),_:1}),T(u),T(p,{class:"pl-8"},{default:ee((()=>[Je,Ne])),_:1})])),_:1})])),_:1},8,["modelValue"])]),te("div",{class:"dropzone",onDrop:t[5]||(t[5]=ae(((...e)=>r.dropHandler&&r.dropHandler(...e)),["prevent"])),onClick:t[6]||(t[6]=(...e)=>r.dropzoneClickHandler&&r.dropzoneClickHandler(...e)),onDragenter:t[7]||(t[7]=ae(((...e)=>r.dragEnter&&r.dragEnter(...e)),["stop","prevent"])),onDragleave:t[8]||(t[8]=ae(((...e)=>r.dragLeave&&r.dragLeave(...e)),["stop","prevent"])),onDragover:t[9]||(t[9]=ae((()=>{}),["stop","prevent"])),style:le({borderColor:s.hovered?r.getBorderColor:"",backgroundImage:`url(${r.fileImage})`})},null,36),te("input",{ref:"fileInput",class:"dropzoneInput",type:"file",onChange:t[10]||(t[10]=(...e)=>r.selectHandler&&r.selectHandler(...e)),multiple:"false",accept:".xml"},null,40,He)])),_:1})},Ie.__scopeId="data-v-46bfa9d0",N(Ie,"components",{VSpacer:H,VIcon:Q,VTooltip:Le,VBtn:Y,VCardTitle:je,VDivider:Ve,VCardText:Se,VCard:De,VDialog:X});const Qe={data:()=>({}),props:{name:String,icon:String,desc:String,ch18:String,unlock:{type:Boolean,default:!0}},computed:{className(){return this.unlock?"unlock":"lock"},url(){return"/player-editor/telenticon/"+this.icon},title(){return"天赋名:"+this.ch18+"   天赋描述:"+this.desc}},methods:{emitChange(){this.unlock?this.$emit("deleteTelent",this.name,this.ch18):this.$emit("addTelent",this.name,this.ch18)}}};z("data-v-cbc710b2");const Ye={class:"d-flex flex-row justify-space-between px-4"},Xe=["src"];W(),Qe.render=function(e,t,a,l,s,r){const n=K("v-tooltip"),i=K("v-spacer");return Z(),re("div",Ye,[T(n,{large:"",height:"50",activator:"parent",right:""},{default:ee((()=>[se(ne(r.title),1)])),_:1}),T(i),te("figure",{class:ie(r.className)},[te("img",{src:r.url,style:{display:"block"},onClick:t[0]||(t[0]=(...e)=>r.emitChange&&r.emitChange(...e))},null,8,Xe)],2)])},Qe.__scopeId="data-v-cbc710b2",N(Qe,"components",{VTooltip:Le,VSpacer:H});const Ge={data:()=>({curJob:"captain"}),props:{},computed:{isPrimary(){return e=>this.curJob===e?"primary":""},curplayer(){return this.$store.getters.curSteamId},jobList(){return this.$store.getters.telentTree},jobMsg(){return this.curCharacter.elements.find((e=>"job"===e.name)).attributes.identifier},curCharacter(){return this.$store.getters.characters.find((e=>e.attributes.steamid===this.$store.getters.curSteamId)).elements.find((e=>"Character"===e.name))},telentList(){return this.curCharacter.attributes.unlockedtalents},character(){return this.curCharacter}},watch:{curplayer:{handler(e,t){""!=e&&(this.curJob=this.jobMsg)},immediate:!0,deep:!0}},methods:{setCurJob(e){this.curJob=e.currentTarget.value},deleteTelent(e,t){let a=this.telentList.split(","),l=a.findIndex((t=>t==e));a.splice(l,1),this.character.attributes.unlockedtalents=a.join(","),this.$store.dispatch("showAlert",{type:"success",text:`删除天赋 ${t}.`})},addTelent(e,t){let a=this.telentList.split(",");a.findIndex((t=>t==e))<0&&a.push(e),this.character.attributes.unlockedtalents=a.join(","),this.$store.dispatch("showAlert",{type:"success",text:`添加天赋 ${t}.`})},addAllTelent(e,t){console.log(e),console.log(t);let a=[],l=!0,s=this.telentList.split(","),r=this.jobList.find((e=>e.job==t)).types.find((t=>t.type==e)).telnets;for(let[n,i]of Object.entries(r)){s.findIndex((e=>e==i.name))<0&&(a.push(i.ch18),s.push(i.name),l=!1)}if(l){a=[];let e=this.telentList.split(",");for(let[t,l]of Object.entries(r)){let t=e.findIndex((e=>e==l.name));e.splice(t,1),a.push(l.ch18)}this.character.attributes.unlockedtalents=e.join(",")}else this.character.attributes.unlockedtalents=s.join(",");this.$store.dispatch("showAlert",{type:"success",text:`批量修改天赋 ${a.join(",")}.`})}},components:{TelentListElement:Qe}},ze=te("br",null,null,-1),We=se("全选");Ge.render=function(e,t,a,l,s,r){const n=K("v-btn"),i=K("v-col"),o=K("v-row"),c=K("TelentListElement"),d=K("v-container");return Z(),q(d,{class:"grey lighten-5"},{default:ee((()=>[T(o,null,{default:ee((()=>[(Z(!0),re(pe,null,ue(r.jobList,(e=>(Z(),q(i,{key:e.job,sm:"2","align-self":"start"},{default:ee((()=>[T(n,{style:{"font-size":"large"},height:"60",width:"130",value:e.job,onClick:r.setCurJob,color:r.isPrimary(e.job)},{default:ee((()=>[se(ne(e.ch18),1)])),_:2},1032,["value","onClick","color"])])),_:2},1024)))),128))])),_:1}),T(o,null,{default:ee((()=>[(Z(!0),re(pe,null,ue(r.jobList,(e=>L((Z(),q(i,{key:e,cols:"12",sm:"12"},{default:ee((()=>[T(d,null,{default:ee((()=>[T(o,null,{default:ee((()=>[(Z(!0),re(pe,null,ue(e.types,(t=>(Z(),q(i,{key:t.type,cols:"12",sm:"4"},{default:ee((()=>[T(o,{class:"mb-5"},{default:ee((()=>[T(n,{class:"ma-2",outlined:"",width:"110",color:"indigo",style:{left:"18px","font-size":"medium"},onClick:a=>r.addAllTelent(t.type,e.job)},{default:ee((()=>[se(ne(t.ch18),1),ze,We])),_:2},1032,["onClick"])])),_:2},1024),(Z(!0),re(pe,null,ue(t.telnets,(e=>(Z(),q(o,{key:e.name,class:"mb-6"},{default:ee((()=>[T(c,{onDeleteTelent:r.deleteTelent,onAddTelent:r.addTelent,name:e.name,ch18:e.ch18,desc:e.desc,icon:e.icon,unlock:-1!=r.telentList.indexOf(e.name)},null,8,["onDeleteTelent","onAddTelent","name","ch18","desc","icon","unlock"])])),_:2},1024)))),128))])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)])),_:2},1536)),[[he,e.job===s.curJob]]))),128))])),_:1})])),_:1})},N(Ge,"components",{VBtn:Y,VCol:oe,VRow:ce,VContainer:de});const Ke={data:()=>({curJob:"captain",name:"",allSkills:[{skill:"helm",ch18:"驾驶水平"},{skill:"weapons",ch18:"武器操作"},{skill:"mechanical",ch18:"机械工程"},{skill:"electrical",ch18:"电气工程"},{skill:"medical",ch18:"医疗水平"}]}),computed:{curplayer(){return this.$store.getters.curSteamId},jobList(){return this.$store.getters.telentTree},jobMsg(){return this.curCharacter.elements.find((e=>"job"===e.name)).attributes.identifier},skills(){return this.curCharacter.elements.find((e=>"job"===e.name)).elements},curCharacter(){return this.$store.getters.characters.find((e=>e.attributes.steamid===this.$store.getters.curSteamId)).elements.find((e=>"Character"===e.name))},character(){return this.curCharacter}},watch:{curplayer:{handler(e,t){""!=e&&(this.curJob=this.jobMsg,this.name=this.curCharacter.attributes.name)},immediate:!0,deep:!0}},methods:{skillChange(e,t){this.curCharacter.elements.find((e=>"job"==e.name)).elements.find((e=>e.attributes.identifier==t)).attributes.level=e.target.value,this.$store.dispatch("showAlert",{type:"success",text:`修改成功 ${t} level = ${e.target.value}.`})},change(e){this.curCharacter.elements.find((e=>"job"==e.name)).attributes.identifier=e.target.value,this.curCharacter.elements.find((e=>"job"==e.name)).attributes.name=this.jobList.find((t=>t.job==e.target.value)).ch18,this.$store.dispatch("showAlert",{type:"success",text:`修改成功 job = ${e.target.value}.`})},changeName(e){this.curCharacter.attributes.name=e.target.value,this.$store.dispatch("showAlert",{type:"success",text:`修改成功 Name = ${e.target.value}.`})},addTelent(e){let t=this.telentList.split(",");t.findIndex((t=>t==e))<0&&t.push(e),this.character.attributes.unlockedtalents=t.join(","),this.$store.dispatch("showAlert",{type:"success",text:`添加天赋 ${e}.`})}},components:{}};z("data-v-4c64632c");const Ze=te("div",{class:"text-h6"},"人物名",-1),qe=te("div",{class:"text-h6"},"职业",-1),et=["value","name"],tt={class:"text-h6"},at=["value","onChange"];W(),Ke.render=function(e,t,a,l,s,r){const n=K("v-card"),i=K("v-col"),o=K("v-row"),c=K("v-container");return Z(),re(pe,null,[T(c,{class:"grey lighten-5 mb-6"},{default:ee((()=>[T(o,{class:"mb-6"},{default:ee((()=>[T(i,null,{default:ee((()=>[T(n,null,{default:ee((()=>[Ze,L(te("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.name=e),onChange:t[1]||(t[1]=(...e)=>r.changeName&&r.changeName(...e))},null,544),[[me,s.name]])])),_:1})])),_:1}),T(i,null,{default:ee((()=>[T(n,null,{default:ee((()=>[qe,L(te("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.curJob=e),onChange:t[3]||(t[3]=(...e)=>r.change&&r.change(...e))},[(Z(!0),re(pe,null,ue(r.jobList.map((e=>e)),(e=>(Z(),re("option",{key:e.job,value:e.job,name:e.ch18},ne(e.ch18),9,et)))),128))],544),[[ve,s.curJob]])])),_:1})])),_:1})])),_:1})])),_:1}),T(c,{class:"grey lighten-5 mb-6"},{default:ee((()=>[(Z(!0),re(pe,null,ue(r.skills,(e=>(Z(),q(o,{"no-gutters":"",key:e.attributes.identifier},{default:ee((()=>[T(n,{class:"pa-2",outlined:"",tile:""},{default:ee((()=>[te("div",tt,ne(s.allSkills.find((t=>t.skill==e.attributes.identifier)).ch18),1),te("input",{value:e.attributes.level,onChange:t=>r.skillChange(t,e.attributes.identifier)},null,40,at)])),_:2},1024)])),_:2},1024)))),128))])),_:1})],64)},Ke.__scopeId="data-v-4c64632c",N(Ke,"components",{VCard:De,VCol:oe,VRow:ce,VContainer:de});const lt={props:{blockDownload:Boolean},computed:{filename(){return this.$store.state.savefileName||"none"},modificationDate(){var e,t,a;let l=null==(a=null==(t=null==(e=this.$store.state.gamesession.elements)?void 0:e[0])?void 0:t.attributes)?void 0:a.savetime;return l?new Date(1e3*parseInt(l)).toLocaleString():"-"}},methods:{download(){let e=be+Ae(this.$store.state.playerCharacters,{spaces:4}),t=document.createElement("a");t.href=URL.createObjectURL(new Blob([e],{type:"application/xml"})),t.download=this.$store.state.savefileName,t.click()}}},st=se("下载"),rt={class:"float-right ma-1"},nt=se(" 加载文件: "),it={class:"text-primary"};lt.render=function(e,t,a,l,s,r){const n=K("v-btn"),i=K("v-card"),o=K("v-col");return Z(),q(o,null,{default:ee((()=>[T(i,{elevation:"1",class:"pr-2"},{default:ee((()=>[T(n,{color:"secondary",disabled:a.blockDownload,onClick:r.download,width:"160"},{default:ee((()=>[st])),_:1},8,["disabled","onClick"]),te("div",rt,[nt,te("span",it,ne(r.filename),1)])])),_:1})])),_:1})},N(lt,"components",{VBtn:Y,VCard:De,VCol:oe});const ot={name:"CharacterSaveTools",components:{FileDropper:Ie,TelentList:Ge,SaveDataBar:lt,BaseData:Ke},computed:(ct=i({},fe(["saveLoaded"])),dt={initPlayer(){let e=this.$store.getters.characters,t=[];for(let[a,l]of Object.entries(e))t.push({name:l.attributes.name,steamid:l.attributes.steamid});return t}},t(ct,a(dt))),data:()=>({}),methods:{change(e){this.$store.dispatch("setCurPlayer",e.target.value)}}};var ct,dt;z("data-v-242480c0");const ut=te("label",{class:"text-h4"},"玩家: ",-1),pt=["value"];W(),ot.render=function(e,t,a,l,s,r){const n=K("FileDropper"),i=K("v-col"),o=K("v-row"),c=K("SaveDataBar"),d=K("TelentList"),u=K("BaseData"),p=K("v-container");return Z(),q(p,null,{default:ee((()=>[T(o,null,{default:ee((()=>[T(i,null,{default:ee((()=>[T(n)])),_:1})])),_:1}),T(o,null,{default:ee((()=>[T(c,{blockDownload:!e.saveLoaded},null,8,["blockDownload"])])),_:1}),e.saveLoaded?(Z(),q(o,{key:0},{default:ee((()=>[T(i,null,{default:ee((()=>[ut,te("select",{onChange:t[0]||(t[0]=(...e)=>r.change&&r.change(...e))},[(Z(!0),re(pe,null,ue(r.initPlayer,(e=>(Z(),re("option",{key:e.steamid,value:e.steamid},ne(e.name),9,pt)))),128))],32)])),_:1})])),_:1})):ge("",!0),e.saveLoaded?(Z(),q(o,{key:1},{default:ee((()=>[T(i,null,{default:ee((()=>[T(d)])),_:1}),T(i,{sm:"1"}),T(i,null,{default:ee((()=>[T(u)])),_:1})])),_:1})):ge("",!0)])),_:1})},ot.__scopeId="data-v-242480c0",N(ot,"components",{VCol:oe,VRow:ce,VContainer:de});export{ot as default};
